<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html><head>
<title>Paths</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body background="images/back.gif">
<!--START-->


<h1>Paths</h1>

In giochi più avanzati spesso vorrai che le istanze seguano determinati percorsi.
Anche se puoi indicarli ad esempio usando degli eventi Alarm o il codice, è
piuttosto complesso. La risorsa Path (percorso) è un meccanismo più facile per
fare ciò. L'idea è piuttosto semplice. Definisci un path disegnando un percorso.
Poi puoi inserire un'azione nel Create Event di un object che gli dica di seguire
quel path. Questo capitolo spiegherà tutto nel dettaglio.



<h3>Definire i path</h3>

Per creare un path nel tuo gioco, scegli <b>Create Path</b> (Crea Path) dal menu <b>Resources</b>.
Apparirà questa finestra (nell'esempio abbiamo già aggiunto un piccolo path).

<p>
<img src="images/form_path.jpg">

<P>
In alto a destra puoi impostare il nome del path, come al solito. Sotto
si trovano i punti che definiscono il path. Ogni punto ha una posizione
e una velocità (sp). A seconda di come usi il path, la posizione può
essere assoluta, cioè l'istanza andrà in quello specifico posto, o relativa,
cioè l'istanza comincia alla prima posizione del path e lo segue dalla sua
posizione corrente. La velocità va interpretata come segue. Il valore 100
indica che viene usata la velocità del path quando viene assegnato all'istanza.
un valore minore riduce la velocità, un valore maggiore la aumenta (in sintesi,
indica la percentuale della velocità assegnata all'istanza), La velocità
viene interpolata tra i pixel, quindi la velocità cambierà gradualmente.

<P>
Per aggiungere un punto clicca su <B>Add</B> (agguingi). Viene fatta una copia
del punto selezionato. Ora puoi modificare posizione e velocitàcambiando i
valori nei campi di inserimento. Puoi cambiare i valori di qualsiasi punto
della lista selezionandolo. Clicca su <B>Insert</B> (inserisci) Per inserire
un nuovo punto prima di quello selezionato, e <B>Delete</B> (elimina) per
cancellare il punto selezionato. 

<P>
Sulla destra puoi vedere il path. Il punto rosso indica il punto di controllo
attualmente selezionato. I punti blu sono gli altri punti. Il quadratino verde
indica il punto di partenza del path. Puoi cambiare il path anche col mouse.
Clicca ovunque per aggiungere un punto. Clicca su un punto esistente e trascinalo
per cambiarne la posizione. Se tieni premuto &lt;Shift&gt; mentre clicchi su
un punto, puoi inserirne uno (prima di quello appena cliccato). Infine, puoi
usare il tasto destro per rimuovere i punti. (Nota che non puoi cambiare la
velocità in questo modo.) Normalmente i punti verranno allineati con una griglia.
Puoi cambiare le impostazioni della griglia nella barra degli strumenti in alto.
Qui puoi anche indicare se mostrare o meno la griglia. Se vuoi piazzare con
precisione un punto, tieni premuto &lt;Alt&gt; mentre lo sposti per ignorare
la griglia.

<P>
Puoi influenzare la forma del path in due modi. Primo, puoi scegliere il tipo
di connessione. Puoi usare linee dritte o linee curve e smussate. Secondo,
puoi indicare se il path deve essere chiuso o no.

<P>
Nella barra degli strumenti si trovano dei comandi importanti. Eccone la
descrizione da sinistra a destra. Il primo pulsante salva e chiude la finestra.
(Se vuoi chiudere senza salvare, clicca sul pulsante Chiudi della finestra
e indica di non voler salvare.) Accanto c'è il pulsante per annullare
l'ultima azione.

<p>
Il set di comandi seguente ti permette di cancellare tutto, invertire il
senso di marcia del path, spostarlo per intero, capovolgerlo orizzontalmente
o verticalmente, ruotarlo, ingrandirlo/rimpicciolirlo. Accanto ci sono i
pulsanti per spostare la visuale (e non il path stesso, l'area coperta dalla
visuale è indicata dalla barra di stato in basso) e centrarla.&nbsp; Puoi anche
usare il bottone centrale del mouse per fare una panoramica attorno al path.

<P>
Come già indicato sopra puoi impostare la griglia e decidere se mostrarla o no.
Infine c'è un pulsante che ti permette di impostare una room specifica come
sfondo, così potrai mettere il path in un punto particolare della room, ad
esempio su un circuito per le corse, in modo che le istanze seguano il percorso
giusto. (Ha senso solo se usi la posizione assoluta, vedi sotto.)



<h3>Assegnare i path agli object</h3>

Per assegnare un path a un'istanza di un object, puoi mettere l'azione pat
in un evento, per esempio in quello Create. In quest'azione devi specificare
il path dal menu a tendina. Ci sono anche altri valori che puoi fornire.

<P>
Devi indicare il path da seguire e la velocità in pixel per step. Se la velocità
è positiva l'istanza comincia dall'inizio del path, altrimenti comincia dalla fine.
Ricorda che quando hai definito il path hai specificato per ogni punto la velocità
relativa a questa che stai fornendo adesso. C'è anche un'azione per cambiare la
velocità di un path mentre è in esecuzione. Puoi usarla, per esempio, per farla
accelerare o rallentare durante il percorso. Nota che la velocità normale dell'istanza
viene ignorata (impostata a 0) durante l'esecuzione del path. Anche cose come
gravità e attrito/frizione (ne parliamo nella revisione...) non influenzano
il movimento lungo il path.

<P>
Puoi va specificato il comportamento alla fine, cioè cosa succede quando l'istanza
raggiunge la fine del path. Puoi scegliere di fermare il movimento e terminare
il path; o di ricominciare il path da capo, vale a dire, l'istanza salta alla
posizione iniziale ed esegue il path dall'inizio. Una terza opzione consiste
nel ricominciare dalla posizione corrente, cioè l'istanza segue il path di nuovo
ma partendo dalla sua nuova posizione (è lo stesso se il path è chiuso); infine
puoi scegliere di invertire il movimento, facendo andare l'istanza avanti e indietro
sul path. Nota che alla fine di un path si verifica anche un evento; vedi a fine pagina.

<!--SEGNAPOSTO-->

<P>
Finally you can indicate whether the path must be absolute or relative. An
absolute path is executed at the place where it is defined. The instance is
placed at the start position and moved from there (end position when speed
is negative). This is, for example, useful when you have a race track on
which you have defined the path. When you choose relative the instances starts
executing the path from its current position. This is useful when an
instance should make a local motion. For example, space ships in a space
invader game can make a particular turn from their current position.

<P>
When you want to place the instance at a different point along its path you
can use the action to set the path position. A path position always lies
between 0 and 1, 0 indicating the start position and 1 the end position on
the path. Note that in each step the direction variable is automatically set
to the correct direction along the path. You can use this variable to
choose the correct orientation for the sprite.

<P>
When using scripts or pieces of code you have more control over the way the
path is executed. There is a function to start a path for an instance. The
variable <TT>path_position</TT> indicates the current position on the path
(between 0 and 1 as indicated above). The variable <TT>path_speed</TT>
indicates the speed along the path. A variable <TT>path_scale</TT> can be
used to scale the path. A value of 1 is the original size. A larger value
indicates that the path is made larger; a smaller value makes it smaller.
The variable <TT>path_orientation</TT> indicates the orientation in which
the path is executed (in degrees counter-clockwise). This enables you to
execute the path in a different orientation (e.g. moving up and down rather
than left and right). There is also a variable to control the end behavior.
Finally there are lots of functions to ask for properties of paths (e.g. the
x and y coordinate at a certain positions) and there are functions to create
paths. There are even functions that create collision free paths for an
instance to reach a certain goal. See the later sections on GML for details
on this.

<P>
You might wonder what happens when the instance collides with another
instance while it follows a path. Basically the same happens as when the
instance moves with a speed. When there is a solid instance, the instance is
placed back at its previous location. When both instances are not solid they are
placed at their new positions Next the collision event(s) are executed and
it is checked whether the collision has been resolved. If not and the other
instance is solid the instance will stop, as it should (assuming there is a
collision event defined). Also, the <TT>path_position</TT> variable is not
increased. When the blocking instance disappears the instance will continue
to follow its path. To handle collisions yourself the variable <TT>
path_positionprevious</TT> can be useful. It holds the previous position for
the path and you can set the path position to this variable to avoid
advancing along the path.



<h3>The path event</h3>

As described above, you can indicate what must happen when the instance
reaches the end of the path. At this moment also an <b>End of Path</b> event
occurs. You can find it under the <b>Other</b> events. Here you can place
actions. For example, you might want to destroy the instance, or let it
start a new (different) path.

<!--END-->
</body>
</html>

<!-- KEYWORDS
adding paths
creating paths
paths
path on room image
setting paths
path index
path orientation
path scale
path position
path end behavior
end of path event
smooth paths
--> 
